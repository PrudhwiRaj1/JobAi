{% extends 'base.html' %}
{% load static %}
{% block content %}
<style>
  .scrollable-table {
    max-height: 400px;
    overflow-y: auto;
    overflow-x: auto;
  }
  .header-table thead th {
      background: #007bff; /* Your theme color */
      color: white;
      padding: 5px;
      text-align: left;
      /* You can add more styling if needed */
    }
  #message-container {
    position: fixed;
    top: 20px;
    right: 20px;
    width: 300px;
    z-index: 1000;
}
.alert {
    padding: 15px;
    border-radius: 5px;
    margin-bottom: 10px;
    animation: fadeOut 5s ease-in-out forwards;
}
  table {
    width: 100%;
    /* border-collapse: collapse; */
  }
  thead th {
    position: sticky;
    top: 0;
    background: #007bff;
    color: #fff;
    padding: 10px;
    border: 1px solid #dee2e6;
    text-align: left;
  }
  tbody td {
    padding: 8px;
    border: 1px solid #dee2e6;
    vertical-align: middle;
  }
  tbody tr:hover {
    background-color: #f1f1f1;
  }
  .no-data {
    text-align: center;
    font-weight: 600;
    color: #555;
    padding: 20px;
  }
</style>

<div class="container mt-4">
  <h4>Applied Jobs</h4>
  <p class="mt-3">Hello, {{ fname }}. Here are the applied jobs.</p>
  
  {% if jobs %}
    <div class="scrollable-table">
      <table class="table table-striped table-bordered header-table" >
        <colgroup>
          <col style="width: 2%;">
          <col style="width: 10%;">
          <col style="width: 20%;">
          <col style="width: 15%;">
          <col style="width: 15%;">
          <col style="width: 10%;">
          <col style="width: 10%;">
        </colgroup>
        <thead>
          <tr>
            <th>#</th>
            <th>Appl. ID</th>
            <th>Job Title</th>
            <th>Company</th>
            <th>Location</th>
            <th>Applied At</th>
            <th>Last Date</th>
          </tr>
        </thead>
        <tbody>
          {% for job in jobs%}
            <tr>
              <td>{{forloop.counter}}</td>
              <td>{{job.id}}</td>
              <td>{{ job.company_joblist.job_title.job_title }}</td>
              <td>{{ job.company_joblist.company.name }}</td>
              <td>{{ job.company_joblist.location }}</td>
              <td>{{ job.applied_at|date:"d-M-Y" }}</td>
              <td>{{job.company_joblist.Lastdate|date:"d-M-Y" }}</td>
            </tr>
          {% endfor %}
        </tbody>
      </table>
    </div>
  {% else %}
    <div class="alert alert-warning mt-3">No Applied jobs.</div>
  {% endif %}

  

  {% if messages %}
    {% for message in messages %}
    <div class="message-container">
      <div class="alert {% if message.tags == 'success' %}alert-success{% else %}alert-danger{% endif %} fw-bold text-dark" 
           style="position: fixed; top: 20px; right: 20px; width: 300px; z-index: 1000;">
        <div class="d-flex justify-content-between align-items-center">
          <span>Notification</span>
          <button type="button" class="btn btn-sm btn-danger" onclick="this.parentElement.parentElement.parentElement.style.display='none'">X</button>
        </div>
        <div>{{ message }}</div>
      </div>
    </div>
    {% endfor %}
   
  {% endif %}
</div>
{% endblock %}
